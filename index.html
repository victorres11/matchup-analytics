<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="./favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weekly Matchup Analytics</title>
    <base href="./" />
    <script type="module" crossorigin src="./assets/index-CMUMgFUB.js"></script>
    <link rel="stylesheet" crossorigin href="./assets/index-BJ2FUM-C.css">
  </head>
  <body>
    <div id="root"></div>
    
    <!-- Routing Helper Script -->
    <script src="./routing-helper.js"></script>
    
    <script>
      // Client-side routing for GitHub Pages
      (function() {
        console.log('Initializing routing system...');
        
        // Check if we have a stored route from 404.html redirect
        const storedRoute = localStorage.getItem('matchupRoute');
        const storedFullPath = localStorage.getItem('fullPath');
        
        if (storedRoute) {
          console.log('Found stored route:', storedRoute);
          console.log('Stored full path:', storedFullPath);
          
          // Clear the stored route
          localStorage.removeItem('matchupRoute');
          localStorage.removeItem('fullPath');
          
          // Set the route information for the app
          window.matchupRoute = storedRoute;
          window.fullPath = storedFullPath;
          
          // Update the URL without page reload
          if (storedFullPath && storedFullPath !== window.location.pathname) {
            console.log('Updating URL to:', storedFullPath);
            window.history.replaceState({ route: storedRoute }, '', storedFullPath);
          }
          
          console.log('Restored matchup route:', storedRoute);
        } else {
          // Check current URL for direct navigation
          const path = window.location.pathname;
          console.log('Current path:', path);
          
          const isMatchupRoute = path.includes('/weekly-matchups/');
          
          if (isMatchupRoute) {
            // Extract the matchup path
            const basePath = '/matchup-analytics';
            let cleanPath = path;
            
            if (path.startsWith(basePath)) {
              cleanPath = path.substring(basePath.length);
            }
            
            if (cleanPath.startsWith('/weekly-matchups/')) {
              const matchupPath = cleanPath.replace('/weekly-matchups/', '');
              window.matchupRoute = matchupPath;
              console.log('Direct matchup route detected:', matchupPath);
            }
          }
        }
        
        // Wait for the routing helper to be ready
        window.addEventListener('DOMContentLoaded', function() {
          console.log('DOM loaded, checking routing helper...');
          
          if (window.matchupRouter && window.matchupRoute) {
            console.log('Initializing router with route:', window.matchupRoute);
            // Initialize the router with the current route
            window.matchupRouter.currentRoute = window.matchupRoute;
            window.matchupRouter.handleRoute(window.matchupRoute);
          } else {
            console.log('No matchup route found or router not ready');
          }
        });
      })();
    </script>
  </body>
</html>
