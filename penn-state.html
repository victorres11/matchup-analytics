<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Penn State Nittany Lions - Snap Count Analytics</title>
    <link rel="icon" type="image/svg+xml" href="./Big_Ten_Conference_logo.svg">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #041e42 0%, #1e3a8a 50%, #60a5fa 100%);
            color: #333;
            min-height: 100vh;
        }

        /* Alternative bar chart styles - uncomment the one you prefer */
        
        /* Style 1: Penn State Team Colors (Current) */
        .bar {
            background: linear-gradient(180deg, #1e3a8a 0%, #60a5fa 50%, #e2e8f0 100%) !important;
            border-radius: 4px 4px 0 0;
            position: relative;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(30,58,138,0.2);
            border: 1px solid #cbd5e1;
        }

        .bar:hover {
            transform: translateY(-4px);
            background: linear-gradient(180deg, #cbd5e1 0%, #dbeafe 20%, #3b82f6 100%) !important;
            box-shadow: 0 6px 20px rgba(30,58,138,0.3);
            border-color: #3b82f6;
        }

        /* Style 2: Modern Card (Alternative) */
        /*
        .bar {
            background: white;
            border-radius: 6px 6px 0 0;
            position: relative;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border: 1px solid #e5e7eb;
        }
        .bar:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
            border-color: #1e3a8a;
        }
        */

        /* Style 3: Subtle Depth (Alternative) */
        /*
        .bar {
            background: #f3f4f6;
            border-radius: 0;
            position: relative;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: inset 0 -2px 0 #1e3a8a;
        }
        .bar:hover {
            transform: translateY(-1px);
            background: #e5e7eb;
            box-shadow: inset 0 -3px 0 #1e3a8a;
        }
        */

        /* Style 4: Clean Lines (Alternative) */
        /*
        .bar {
            background: #1e3a8a;
            border-radius: 0;
            position: relative;
            transition: all 0.3s ease;
            cursor: pointer;
            box-shadow: none;
            border-bottom: 2px solid #374151;
        }
        .bar:hover {
            transform: translateY(-2px);
            background: #3b82f6;
            border-bottom-color: #1e3a8a;
        }
        */

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, #041e42 0%, #1e3a8a 100%);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(4,30,66,0.3);
            text-align: center;
            color: white;
        }

        .logos {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
        }

        .logo {
            height: 80px;
            width: auto;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.1));
        }

        .divider {
            width: 3px;
            height: 80px;
            background: #e5e7eb;
            border-radius: 2px;
        }

        h1 {
            color: white;
            font-size: 2.5em;
            font-weight: 700;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            color: #e5e7eb;
            font-size: 1.2em;
            font-weight: 500;
        }

        .timestamp {
            color: #e5e7eb;
            font-size: 0.8em;
            font-weight: 300;
            margin-top: 10px;
            opacity: 0.9;
        }

        .tabs {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .tab-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #041e42 0%, #1e3a8a 100%);
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 20px;
            border-radius: 15px 15px 0 0;
        }

        .tab-btn {
            padding: 15px 30px;
            border: none;
            background: none;
            color: #e5e7eb;
            border-radius: 10px 10px 0 0;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .tab-btn.active {
            background: #e5e7eb;
            color: #041e42;
            border-bottom-color: #e5e7eb;
            font-weight: 700;
        }

        .tab-btn:hover:not(.active) {
            background: rgba(229,231,235,0.2);
            color: #e5e7eb;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .position-group {
            margin-bottom: 40px;
        }

        .position-title {
            color: #041e42;
            font-size: 1.8em;
            font-weight: 600;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e5e7eb;
        }

        .chart-container {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 12px;
            padding: 25px;
            border: 1px solid #e5e7eb;
            box-shadow: 0 4px 15px rgba(4,30,66,0.1);
        }

        .chart-wrapper {
            position: relative;
            height: 300px;
            margin-bottom: 20px;
        }

        .chart-canvas {
            width: 100% !important;
            height: 100% !important;
        }







        .player-details {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: none;
        }

        .player-details.active {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .player-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .player-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #041e42;
        }

        .player-name {
            font-weight: 600;
            color: #041e42;
            margin-bottom: 5px;
        }

        .player-info {
            color: #666;
            font-size: 0.9em;
        }

        .stats-summary {
            background: linear-gradient(135deg, #041e42 0%, #1e3a8a 100%);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(4,30,66,0.3);
            margin-bottom: 30px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .stat-card {
            text-align: center;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            border: 1px solid rgba(229,231,235,0.3);
            backdrop-filter: blur(10px);
        }

        .stat-value {
            font-size: 2em;
            font-weight: 700;
            color: #e5e7eb;
            margin-bottom: 5px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .stat-label {
            color: white;
            font-weight: 500;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header {
                padding: 20px;
            }
            
            .tabs {
                padding: 20px;
            }
            
            .tab-buttons {
                flex-direction: column;
            }
            
            .bar-chart {
                height: 200px;
                padding: 20px 0 70px 0;
            }
            
            .bar {
                max-width: 35px;
                margin: 0 2px;
            }
            
            .bar-label {
                font-size: 0.65em;
                bottom: -55px;
                width: 100px;
            }
        }

        .footer {
            background: linear-gradient(135deg, #1e3a8a 0%, #60a5fa 100%);
            color: white;
            padding: 40px 20px;
            margin-top: 50px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(30,58,138,0.3);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }

        .footer-section h3 {
            color: #e5e7eb;
            font-size: 1.2rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .footer-section p {
            color: #e5e7eb;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .footer-section a {
            color: #e5e7eb;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-section a:hover {
            color: white;
        }

        .footer-bottom {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(229,231,235,0.3);
            color: #e5e7eb;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logos">
                <img src="./Big_Ten_Conference_logo.svg" alt="Big Ten Conference" class="logo">
                <div class="divider"></div>
                <img src="./PennState.svg" alt="Penn State Nittany Lions" class="logo">
            </div>
            <h1>Penn State Nittany Lions</h1>
            <p class="subtitle">Snap Count Analytics</p>
            <p class="timestamp" id="last-updated">Updated at <span id="update-time"></span></p>
        </div>

        <!-- Stats Summary -->
        <div class="stats-summary">
            <h2 style="color: #041e42; margin-bottom: 20px; text-align: center;">Team Overview</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="total-offensive-snaps">-</div>
                    <div class="stat-label">Total Offensive Snaps</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="total-defensive-snaps">-</div>
                    <div class="stat-label">Total Defensive Snaps</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="offensive-players">-</div>
                    <div class="stat-label">Offensive Players</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="defensive-players">-</div>
                    <div class="stat-label">Defensive Players</div>
                </div>
            </div>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <div class="tab-buttons">
                <button class="tab-btn active" onclick="showTab('offense')">OFFENSIVE</button>
                <button class="tab-btn" onclick="showTab('defense')">DEFENSIVE</button>
            </div>

            <!-- Offensive Tab -->
            <div id="offense" class="tab-content active">
                <div class="position-group">
                    <h3 class="position-title">Wide Receivers</h3>
                    <div class="chart-container">
                        <div class="chart-wrapper">
                            <canvas id="wr-chart" class="chart-canvas"></canvas>
                        </div>
                        <div class="player-details" id="wr-details"></div>
                    </div>
                </div>

                <div class="position-group">
                    <h3 class="position-title">Tight Ends</h3>
                    <div class="chart-container">
                        <div class="chart-wrapper">
                            <canvas id="te-chart" class="chart-canvas"></canvas>
                        </div>
                        <div class="player-details" id="te-details"></div>
                    </div>
                </div>

                <div class="position-group">
                    <h3 class="position-title">Running Backs</h3>
                    <div class="chart-container">
                        <div class="chart-wrapper">
                            <canvas id="rb-chart" class="chart-canvas"></canvas>
                        </div>
                        <div class="player-details" id="rb-details"></div>
                    </div>
                </div>

                <div class="position-group">
                    <h3 class="position-title">Offensive Line</h3>
                    <div class="chart-container">
                        <div class="chart-wrapper">
                            <canvas id="ol-chart" class="chart-canvas"></canvas>
                        </div>
                        <div class="player-details" id="ol-details"></div>
                    </div>
                </div>
            </div>

            <!-- Defensive Tab -->
            <div id="defense" class="tab-content">
                <div class="position-group">
                    <h3 class="position-title">Defensive Backs</h3>
                    <div class="chart-container">
                        <div class="chart-wrapper">
                            <canvas id="db-chart" class="chart-canvas"></canvas>
                        </div>
                        <div class="player-details" id="db-details"></div>
                    </div>
                </div>

                <div class="position-group">
                    <h3 class="position-title">Linebackers</h3>
                    <div class="chart-container">
                        <div class="chart-wrapper">
                            <canvas id="lb-chart" class="chart-canvas"></canvas>
                        </div>
                        <div class="player-details" id="lb-details"></div>
                    </div>
                </div>

                <div class="position-group">
                    <h3 class="position-title">Defensive Line</h3>
                    <div class="chart-container">
                        <div class="chart-wrapper">
                            <canvas id="dl-chart" class="chart-canvas"></canvas>
                        </div>
                        <div class="player-details" id="dl-details"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>📊 Data Sources</h3>
                    <p>Snap count data is sourced from PFF Data, providing comprehensive player participation analytics and game film analysis. All player participation data reflects actual game time and is updated following each contest.</p>
                    <p>Data accuracy is maintained through PFF's comprehensive review of official game records and statistical databases.</p>
                </div>
                
                <div class="footer-section">
                    <h3>🏈 Analytics</h3>
                    <p>This dashboard provides comprehensive snap count analysis for college football teams, breaking down player participation by position groups and game situations.</p>
                    <p>Charts powered by Chart.js for professional-grade data visualization and interactive analytics.</p>
                </div>
                
                <div class="footer-section">
                    <h3>⚡ Technology</h3>
                    <p>Built with modern web technologies including HTML5, CSS3, JavaScript, and Chart.js for responsive, professional analytics dashboards.</p>
                    <p>Deployed on GitHub Pages for reliable, fast-loading performance worldwide.</p>
                </div>
            </div>
            
            <div class="footer-bottom">
                Made with love from Richmond, VA by Vic Torres
            </div>
        </div>
    </div>

    <script>
        // Tab switching functionality
        function showTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Remove active class from all buttons
            const tabButtons = document.querySelectorAll('.tab-btn');
            tabButtons.forEach(btn => btn.classList.remove('active'));
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }

        // Chart.js configuration
        const chartConfig = {
            type: 'bar',
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        backgroundColor: 'rgba(30, 58, 138, 0.9)',
                        titleColor: 'white',
                        bodyColor: 'white',
                        borderColor: '#1e3a8a',
                        borderWidth: 1,
                        cornerRadius: 8,
                        displayColors: false,
                        callbacks: {
                            label: function(context) {
                                const totalSnaps = context.dataset.data.reduce((sum, val) => sum + val, 0);
                                const percentage = ((context.parsed.y / totalSnaps) * 100).toFixed(1);
                                return `Snaps: ${context.parsed.y} (${percentage}%)`;
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(0, 0, 0, 0.1)',
                            drawBorder: false
                        },
                        ticks: {
                            color: '#6b7280',
                            font: {
                                size: 12
                            }
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        },
                        ticks: {
                            color: '#6b7280',
                            font: {
                                size: 11
                            },
                            maxRotation: 45,
                            minRotation: 0
                        }
                    }
                },
                interaction: {
                    intersect: false,
                    mode: 'index'
                }
            }
        };

        // Load and display data
        async function loadData() {
            try {
                const [offenseData, defenseData] = await Promise.all([
                    fetch('./penn_state_offense.json').then(res => res.json()),
                    fetch('./penn_state_defense_data.json').then(res => res.json())
                ]);

                displayOffensiveData(offenseData.penn_state_offense);
                displayDefensiveData(defenseData.penn_state_defense);
                updateStats(offenseData.penn_state_offense, defenseData.penn_state_defense);
            } catch (error) {
                console.error('Error loading data:', error);
            }
        }

        function displayOffensiveData(data) {
            createChart('wr-chart', data.wide_receivers, 'wr-details');
            createChart('te-chart', data.tight_ends, 'te-details');
            createChart('rb-chart', data.running_backs, 'rb-details');
            createChart('ol-chart', data.offensive_line, 'ol-details');
        }

        function displayDefensiveData(data) {
            createChart('db-chart', data.defensive_backs, 'db-details');
            createChart('lb-chart', data.linebackers, 'lb-details');
            createChart('dl-chart', data.defensive_line, 'dl-details');
        }

        function createChart(canvasId, players, detailsId) {
            if (!players || players.length === 0) return;

            const canvas = document.getElementById(canvasId);
            const details = document.getElementById(detailsId);
            
            // Clear existing content
            details.innerHTML = '';

            // Sort players by snaps (descending)
            const sortedPlayers = [...players].sort((a, b) => b.snaps - a.snaps);
            
            // Calculate total snaps for percentage calculation
            const totalSnaps = sortedPlayers.reduce((sum, player) => sum + player.snaps, 0);
            
            // Prepare data for Chart.js
            const labels = sortedPlayers.map(player => {
                const nameParts = player.name.split(' ');
                let lastName = nameParts[nameParts.length - 1];
                
                // Handle "Jr." names properly
                if (lastName === 'Jr.' && nameParts.length > 1) {
                    lastName = nameParts[nameParts.length - 2] + ' Jr.';
                }
                // Handle "JR" names properly (without period)
                else if (lastName === 'JR' && nameParts.length > 1) {
                    lastName = nameParts[nameParts.length - 2] + ' JR';
                }
                
                const percentage = ((player.snaps / totalSnaps) * 100).toFixed(1);
                return `${lastName} #${player.jersey} (${percentage}%)`;
            });
            
            const data = sortedPlayers.map(player => player.snaps);
            
            // Create Chart.js chart
            new Chart(canvas, {
                ...chartConfig,
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: 'rgba(30, 58, 138, 0.8)',
                        borderColor: 'rgba(30, 58, 138, 1)',
                        borderWidth: 1,
                        borderRadius: 4,
                        hoverBackgroundColor: 'rgba(59, 130, 246, 0.9)',
                        hoverBorderColor: 'rgba(59, 130, 246, 1)'
                    }]
                }
            });

            // Create player details section
            createPlayerDetailsSection(sortedPlayers, details);
        }

        function createPlayerDetailsSection(players, detailsElement) {
            const title = document.createElement('h4');
            title.textContent = 'Player Details';
            title.style.color = '#041e42';
            title.style.marginBottom = '15px';
            detailsElement.appendChild(title);

            const grid = document.createElement('div');
            grid.className = 'player-grid';

            players.forEach(player => {
                const card = document.createElement('div');
                card.className = 'player-card';
                
                card.innerHTML = `
                    <div class="player-name">${player.name}</div>
                    <div class="player-info">#${player.jersey} • ${player.position}</div>
                    <div class="player-info"><strong>${player.snaps} snaps</strong></div>
                `;
                
                grid.appendChild(card);
            });

            detailsElement.appendChild(grid);
        }

        function showPlayerDetails(player, detailsElement) {
            // Hide all other details
            document.querySelectorAll('.player-details').forEach(detail => {
                detail.classList.remove('active');
            });
            
            // Show clicked details
            detailsElement.classList.add('active');
        }

        function updateStats(offenseData, defenseData) {
            // Calculate totals
            const offensiveSnaps = Object.values(offenseData).flat().reduce((sum, player) => sum + player.snaps, 0);
            const defensiveSnaps = Object.values(defenseData).flat().reduce((sum, player) => sum + player.snaps, 0);
            const offensivePlayers = Object.values(offenseData).flat().length;
            const defensivePlayers = Object.values(defenseData).flat().length;

            // Update display
            document.getElementById('total-offensive-snaps').textContent = offensiveSnaps;
            document.getElementById('total-defensive-snaps').textContent = defensiveSnaps;
            document.getElementById('offensive-players').textContent = offensivePlayers;
            document.getElementById('defensive-players').textContent = defensivePlayers;
        }

        // Update timestamp
        function updateTimestamp() {
            const now = new Date();
            const timeString = now.toLocaleString('en-US', {
                month: 'short',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                hour12: true
            });
            document.getElementById('update-time').textContent = timeString;
        }

        // Load data when page loads
        document.addEventListener('DOMContentLoaded', function() {
            updateTimestamp();
            loadData();
        });
    </script>
</body>
</html>
