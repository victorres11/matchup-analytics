<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weekly Matchup Analytics</title>
    <link rel="icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="stylesheet" crossorigin href="./assets/index-BJ2FUM-C.css">
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; background: #f5f5f5; }
        .debug-info { background: white; padding: 20px; margin: 20px 0; border-radius: 8px; }
        .status { padding: 10px; margin: 10px 0; border-radius: 4px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>Weekly Matchup Analytics - 404 Handler</h1>
    
    <div class="debug-info">
        <h2>Debug Information</h2>
        <div id="debug-content">Loading...</div>
    </div>
    
    <div class="debug-info">
        <h2>Redirecting to Main App...</h2>
        <p>This page should automatically redirect you to the main application.</p>
        <p>If you're not redirected in 5 seconds, <a href="./" id="manual-link">click here</a>.</p>
    </div>
    
    <script>
        // Enhanced 404.html routing for GitHub Pages
        console.log('404.html loaded - starting routing logic...');
        
        function updateDebugInfo() {
            const debugDiv = document.getElementById('debug-content');
            const path = window.location.pathname;
            const search = window.location.search;
            const hash = window.location.hash;
            const basePath = '/matchup-analytics';
            
            debugDiv.innerHTML = `
                <p><strong>Full URL:</strong> ${window.location.href}</p>
                <p><strong>Path:</strong> ${path}</p>
                <p><strong>Base Path:</strong> ${basePath}</p>
                <p><strong>Search:</strong> ${search || 'none'}</p>
                <p><strong>Hash:</strong> ${hash || 'none'}</p>
            `;
        }
        
        function handleRouting() {
            const path = window.location.pathname;
            const search = window.location.search;
            const hash = window.location.hash;
            
            console.log('Handling routing for path:', path);
            
            // Remove the base path for GitHub Pages
            const basePath = '/matchup-analytics';
            let cleanPath = path;
            
            if (path.startsWith(basePath)) {
                cleanPath = path.substring(basePath.length);
                console.log('Cleaned path:', cleanPath);
            }
            
            // Check if this is a matchup route
            if (cleanPath.startsWith('/weekly-matchups/')) {
                // Extract the matchup path
                const matchupPath = cleanPath.replace('/weekly-matchups/', '');
                
                console.log('Matchup route detected:', matchupPath);
                console.log('Storing route in localStorage...');
                
                // Store the route information
                localStorage.setItem('matchupRoute', matchupPath);
                localStorage.setItem('fullPath', path + search + hash);
                localStorage.setItem('routingTimestamp', Date.now());
                
                console.log('Route stored successfully');
                console.log('Redirecting to main app...');
                
                // Redirect to the main page
                window.location.href = './';
            } else {
                console.log('Not a matchup route, redirecting to main page');
                // For other routes, just redirect to main page
                window.location.href = './';
            }
        }
        
        // Update debug info immediately
        updateDebugInfo();
        
        // Handle routing after a short delay to ensure everything is loaded
        setTimeout(handleRouting, 1000);
        
        // Fallback redirect after 5 seconds
        setTimeout(function() {
            console.log('Fallback redirect triggered');
            window.location.href = './';
        }, 5000);
    </script>
    
    <script type="module" crossorigin src="./assets/index-CMUMgFUB.js"></script>
</body>
</html>
